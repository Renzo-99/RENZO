<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>목공실 프로젝트 다운로드</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;display:flex;justify-content:center;align-items:center;min-height:100vh;background:#f5f5f5}
.card{background:#fff;border-radius:16px;padding:48px 40px;text-align:center;box-shadow:0 4px 24px rgba(0,0,0,.1);max-width:440px;width:90%}
h1{font-size:24px;margin-bottom:8px}
.desc{color:#666;margin-bottom:28px;line-height:1.6;font-size:15px}
.btn{display:inline-block;background:#0066ff;color:#fff;border:none;padding:16px 48px;border-radius:12px;font-size:18px;cursor:pointer;transition:all .2s;text-decoration:none}
.btn:hover{background:#0052cc;transform:translateY(-1px);box-shadow:0 4px 12px rgba(0,102,255,.3)}
.btn:active{transform:translateY(0)}
.btn.loading{background:#999;pointer-events:none}
.progress{margin-top:16px;display:none}
.progress.show{display:block}
.bar-wrap{background:#e5e7eb;border-radius:8px;height:8px;overflow:hidden;margin-top:8px}
.bar{background:#0066ff;height:100%;width:0;border-radius:8px;transition:width .3s}
.status{color:#666;font-size:14px;margin-top:8px}
.ok{color:#22c55e;font-size:18px;margin-top:16px;font-weight:600}
.err{color:#f04452;font-size:14px;margin-top:16px}
.info{margin-top:28px;padding:16px 20px;background:#f0f7ff;border-radius:10px;text-align:left;font-size:13px;color:#333;line-height:2}
.info strong{display:block;margin-bottom:4px;font-size:14px}
.info code{background:#e5e7eb;padding:2px 6px;border-radius:4px;font-size:12px}
.alt{margin-top:20px;font-size:12px;color:#999}
.alt a{color:#0066ff;text-decoration:none}
.alt a:hover{text-decoration:underline}
</style>
</head>
<body>
<div class="card">
  <h1>목공실 관리 프로젝트</h1>
  <p class="desc">GitHub에서 최신 소스코드를 다운로드합니다</p>
  <button class="btn" id="dlBtn" onclick="download()">다운로드 (ZIP)</button>
  <div class="progress" id="progress">
    <div class="bar-wrap"><div class="bar" id="bar"></div></div>
    <div class="status" id="status">다운로드 중...</div>
  </div>
  <div id="msg"></div>
  <div class="info">
    <strong>다운로드 후 실행 방법</strong>
    1. ZIP 압축 해제<br>
    2. 폴더에서 터미널 열기<br>
    3. <code>npm install</code> 실행<br>
    4. <code>.env.local</code> 환경변수 확인<br>
    5. <code>npm run dev</code> 실행
  </div>
  <div class="alt">
    직접 다운로드: <a href="https://github.com/Renzo-99/RENZO/archive/refs/heads/main.zip">GitHub ZIP 링크</a>
  </div>
</div>
<script>
var ZIP_URL="https://github.com/Renzo-99/RENZO/archive/refs/heads/main.zip";
function download(){
  var btn=document.getElementById("dlBtn");
  var prog=document.getElementById("progress");
  var bar=document.getElementById("bar");
  var status=document.getElementById("status");
  var msg=document.getElementById("msg");
  btn.classList.add("loading");btn.textContent="다운로드 중...";
  prog.classList.add("show");msg.innerHTML="";
  var xhr=new XMLHttpRequest();
  xhr.open("GET",ZIP_URL,true);xhr.responseType="blob";
  xhr.onprogress=function(e){
    if(e.lengthComputable){var p=Math.round(e.loaded/e.total*100);bar.style.width=p+"%";status.textContent=p+"% ("+fmt(e.loaded)+" / "+fmt(e.total)+")";}
    else{bar.style.width="60%";status.textContent=fmt(e.loaded)+" 다운로드 중...";}
  };
  xhr.onload=function(){
    if(xhr.status===200){bar.style.width="100%";status.textContent="완료!";
      var a=document.createElement("a");a.href=URL.createObjectURL(xhr.response);a.download="woodshop-manager.zip";a.click();URL.revokeObjectURL(a.href);
      msg.innerHTML='<div class="ok">✓ 다운로드 완료!</div>';btn.textContent="다시 다운로드";btn.classList.remove("loading");
    }else{fail("HTTP "+xhr.status+" 오류");}
  };
  xhr.onerror=function(){fail("네트워크 오류 - 아래 직접 링크를 사용해보세요");};
  xhr.send();
  function fail(t){prog.classList.remove("show");msg.innerHTML='<div class="err">'+t+'</div>';btn.textContent="다시 시도";btn.classList.remove("loading");}
}
function fmt(b){if(b<1024)return b+" B";if(b<1048576)return(b/1024).toFixed(1)+" KB";return(b/1048576).toFixed(1)+" MB";}
</script>
</body>
</html>
